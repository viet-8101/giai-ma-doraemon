<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Gi·∫£i m√£ Doraemon</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://image.tmdb.org/t/p/original/Z3mSxuPRNiFYxf1LBoGz3YrJzC.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .overlay {
      background: rgba(0, 0, 0, 0.2);
      max-width: 800px;
      margin: 10vh auto;
      padding: 35px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
    }

    h1 {
      font-size: 2.4em;
      margin-bottom: 20px;
    }

    textarea {
      width: 85%;
      height: 70px;
      margin-bottom: 20px;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 1em;
      resize: none;
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 18px;
      font-size: 1em;
      background-color: #00bfff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
      white-space: nowrap;
      min-width: 180px;
    }

    button:hover {
      box-shadow: 0 0 20px 5px #00bfff;
    }

    #output {
      margin-top: 20px;
      font-size: 1.2em;
      white-space: pre-wrap;
      min-height: 40px;
    }

    #stats {
      display: none;
    }

    @media (max-width: 600px) {
      textarea {
        width: 95%;
        height: 80px;
      }

      .overlay {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1>üîç Gi·∫£i m√£ Doraemon</h1>
    <textarea id="input" placeholder="Nh·∫≠p m√£ troll ·ªü ƒë√¢y..." onkeydown="chanEnter(event)"></textarea><br>
    <div class="button-group">
      <button onclick="giaiMa()">üß† Gi·∫£i m√£ Doraemon</button>
      <button onclick="saoChep()">üìã Copy k·∫øt qu·∫£</button>
    </div>
    <div id="output"></div>
    <div id="stats"></div>
  </div>

  <!-- Nh·∫°c n·ªÅn -->
  <audio id="myAudio" muted>
    <source src="https://media.vocaroo.com/mp3/1mrXpaxv1jUB" type="audio/mpeg">
    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
  </audio>

  <!-- √Çm thanh g√µ ph√≠m -->
  <audio id="typeSound" preload="auto">
    <source src="https://cdn.pixabay.com/audio/2023/03/01/audio_2a802b1f48.mp3" type="audio/mpeg">
  </audio>

  <script>
    const tuDienDoraemon = {
      "c√°i loa bi·∫øt ƒëi": "Jaian",
      "th√°nh ch·∫£nh": "Suneo",
      "c·ª•c n·ª£ qu·ªëc d√¢n": "Nobita",
      "tr√πm ch√©m gi√≥": "Suneo",
      "boss ƒÉn v·∫∑t": "Doraemon",
      "si√™u nh√¢n g·ª•c ng√£": "Nobita",
      "m√°y ph√°t k·∫πo": "Doraemon",
      "·ªï bom di ƒë·ªông": "Jaian",
      "th√°nh ph√° ƒë·ªì": "Nobita",
      "chuy√™n gia g√¢y h·ªça": "Nobita",
      "nh√† t√†i tr·ª£ n∆∞·ªõc m·∫Øt": "m·∫π Nobita",
      "l√≤ luy·ªán ƒëi·ªÉm 0": "l·ªõp h·ªçc c·ªßa Nobita",
      "tr√πm th·∫•t t√¨nh": "Nobita",
      "m√°y ATM bi·∫øt ƒëi": "Doraemon",
      "tr√≠ tu·ªá nh√¢n t·∫°o c√≥ t√¢m": "Doraemon",
      "con tinh tinh": "Jaian",
      "con kh·ªâ ƒë·ªôt": "Jaian",
      "kh·ªâ ƒë·ªôt": "Jaian",
      "tinh tinh": "Jaian",
      "con c√°o": "Suneo",
      "c√°o": "Suneo",
      "b·∫°ch tu·ªôc": "Noise",
      "qu·∫ßn d√†i": "2 con c√° tr·∫Øm ƒëen ƒëc l√†m ·ªü Ph√°p r·∫•t l√† m·∫Øc ti·ªÅn (c·ªßa Suneo)",
      "m·ª• ph√π th·ªßy": "m·∫π c·ªßa Nobita",
      "t√™n ng·ªëc h·∫≠u ƒë·∫≠u": "Nobita",
      "t√™n robinson phi·ªÅn ph·ª©c": "Nobita",
      "thi√™n t√†i ng·ªß": "Nobita",
      "di·ªÖn vi√™n su·∫•t s·∫Øc": "Nobita",
      "b·∫≠c th·∫ßy nƒÉn n·ªâ": "Nobita",
      "thi√™n t√†i th·∫Øt d√¢y": "Nobita",
      "tay vua s√∫ng": "Nobita",
      "xe bu√Ωt": "Nobita",
      "xe bus": "Nobita",
      "m√®o m√°y": "Doraemon",
      "m·ªè nh·ªçn": "Suneo",
      "l·ªìi r·ªën": "Jaian",
      "y√™n ·∫Øng": "nh√† Shizuka",
      "h√¨nh tr√≤n": "b√°nh r√°n dorayaki",
      "k·∫ª tham lam": "Jaian",
      "hai ng∆∞·ªùi n·ªïi ti·∫øng ham ƒÉn": "Jaian v√† Suneo",
      "ƒëi·ªÉm ƒëen": "ƒëi·ªÉm 0",
      "b√†n tay v√†ng trong l√†ng ng√°o ng∆°": "Nobita",
      "c·ª•c t·∫° qu·ªëc d√¢n": "Nobita",
      "ƒë·∫°i ca s√¢n tr∆∞·ªùng": "Jaian",
      "ng∆∞·ªùi m·∫´u s·ª´ng s·ªè": "Suneo",
      "c√¥ g√°i t·∫Øm m·ªói t·∫≠p": "Shizuka",
      "vua b√°nh r√°n": "Doraemon",
      "th√°nh c·∫ßu c·ª©u": "Nobita",      
      "ng∆∞·ªùi ƒë·∫øn t·ª´ t∆∞∆°ng lai": "Doraemon",
      "c√¢y ATM s·ªëng": "Doraemon",
      "l·ªìng ti·∫øng ƒë·ªông ƒë·∫•t": "Jaian",
      "di·ªÖn vi√™n ch√≠nh c·ªßa bi k·ªãch": "Nobita",
      "fan cu·ªìng c√¥ng ngh·ªá": "Suneo",
      "k·∫ª l∆∞·ªùi bi·∫øng nh·ªè b√©": "Nobita",
      "ch·ªìn xanh nh·ªè ƒë√°ng y√™u": "Doraemon",
      "b√¨nh y√™n tr∆∞·ªõc c∆°n b√£o": "nh√† Shizuka"
    };

    function goChuTungKyTu(text, elementId, tocDo = 30) {
      const element = document.getElementById(elementId);
      const typeSound = document.getElementById("typeSound");
      element.textContent = "";
      let i = 0;

      function goTiep() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          if (text.charAt(i) !== " ") {
            typeSound.currentTime = 0;
            typeSound.play().catch(() => {});
          }
          i++;
          setTimeout(goTiep, tocDo);
        }
      }

      goTiep();
    }

    function giaiMa() {
      const inputElement = document.getElementById("input");
      let text = inputElement.value.toLowerCase().trim();

      if (text === "") {
        alert("‚ö†Ô∏è Vui l√≤ng nh·∫≠p m√£ troll tr∆∞·ªõc khi gi·∫£i m√£!");
        inputElement.focus();
        return;
      }

      const entries = Object.entries(tuDienDoraemon).sort((a, b) => b[0].length - a[0].length);
      for (const [khoa, giaTri] of entries) {
        const re = new RegExp(khoa, "gi");
        text = text.replace(re, giaTri);
      }

      goChuTungKyTu("‚û°Ô∏è K·∫øt qu·∫£: " + text, "output", 30);
    }

    function saoChep() {
      const output = document.getElementById("output").textContent;
      if (output) {
        navigator.clipboard.writeText(output).then(() => {
          alert("‚úÖ ƒê√£ sao ch√©p k·∫øt qu·∫£!");
        }).catch(err => {
          alert("‚ùå Kh√¥ng th·ªÉ sao ch√©p: " + err);
        });
      } else {
        alert("‚ö†Ô∏è Ch∆∞a c√≥ n·ªôi dung ƒë·ªÉ sao ch√©p.");
      }
    }

    function chanEnter(event) {
      if (event.key === "Enter") {
        event.preventDefault();
      }
    }

    // Ph√°t nh·∫°c n·ªÅn khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c
    let nhacDaPhat = false;
    function batNhacKhiTuongTac() {
      if (!nhacDaPhat) {
        const audio = document.getElementById("myAudio");
        audio.muted = false;
        audio.play().catch(err => {
          console.warn("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err);
        });
        nhacDaPhat = true;
        document.removeEventListener("click", batNhacKhiTuongTac);
        document.removeEventListener("keydown", batNhacKhiTuongTac);
      }
    }

    document.addEventListener("click", batNhacKhiTuongTac);
    document.addEventListener("keydown", batNhacKhiTuongTac);
  </script>
</body>
</html>
