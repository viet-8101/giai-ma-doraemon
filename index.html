<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·∫£i m√£ Doraemon</title>
    <link rel="icon" href="Doraenon_logo.ico" type="image/x-icon">

    <style>
        /* CSS C∆† B·∫¢N V√Ä CHUNG */
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: url('doraemon-bg.jpg') no-repeat center center fixed; /* ƒê·ªïi 'doraemon-bg.jpg' th√†nh ·∫£nh n·ªÅn c·ªßa b·∫°n */
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* ƒê·∫£m b·∫£o ƒë·ªß chi·ªÅu cao */
            overflow: hidden; /* NgƒÉn cu·ªôn khi splash screen ƒëang ho·∫°t ƒë·ªông */
        }

        /* Giao di·ªán ch√≠nh c·ªßa ·ª©ng d·ª•ng */
        #mainContent {
            display: none; /* Ban ƒë·∫ßu ·∫©n giao di·ªán ch√≠nh */
            opacity: 0; /* Cho hi·ªáu ·ª©ng m·ªù d·∫ßn khi hi·ªán ra */
            transition: opacity 1s ease-in;
            flex-direction: column; /* ƒê·ªÉ cƒÉn gi·ªØa n·ªôi dung overlay */
            justify-content: center;
            align-items: center;
            width: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu r·ªông ƒë·ªÉ cƒÉn gi·ªØa overlay */
            height: 100vh;
        }

        #mainContent.visible {
            display: flex; /* Hi·ªÉn th·ªã l·∫°i khi splash screen ·∫©n */
            opacity: 1;
        }

        .overlay {
            background: rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 90%; /* Responsive width */
            padding: 35px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
            position: relative;
            box-sizing: border-box; /* ƒê·∫£m b·∫£o padding kh√¥ng l√†m tƒÉng k√≠ch th∆∞·ªõc */
        }

        h1 {
            font-size: 2.4em;
            margin-bottom: 20px;
            color: white; /* ƒê·∫£m b·∫£o m√†u s·∫Øc hi·ªÉn th·ªã r√µ r√†ng */
        }

    textarea {
      width: 70%;
      height: 100px;
      margin-bottom: 20px;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 1em;
      resize: none;
    }

        .button-group {
            display: flex;
            justify-content: center;
            flex-wrap: wrap; /* Cho ph√©p xu·ªëng d√≤ng tr√™n m√†n h√¨nh nh·ªè */
            gap: 12px; /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            margin-bottom: 20px;
        }

        button {
            padding: 10px 18px;
            font-size: 1em;
            background: linear-gradient(270deg, #00bfff, #1e90ff, #ff69b4, #00fa9a, #00bfff);
            background-size: 1000% 1000%;
            animation: gradientFlow 10s ease infinite;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            white-space: nowrap;
            min-width: 180px;
            transition: transform 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.5);
        }

        button:hover {
            transform: scale(1.05);
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #output {
            margin-top: 20px;
            font-size: 1.2em;
            white-space: pre-wrap;
            min-height: 40px;
            color: white;
        }

        #messageBox {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.95em;
            min-height: 25px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        #messageBox.show {
            opacity: 1;
        }

        /* Microphone Indicator */
        .mic-indicator {
            width: 50px;
            height: 50px;
            margin: 20px auto;
            display: none; /* Hidden by default */
        }
        .mic-indicator svg {
            width: 100%;
            height: 100%;
            fill: #00bfff;
            animation: micWave 1s infinite ease-in-out;
        }
        @keyframes micWave {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        #micText {
            margin-top: 10px;
            font-style: italic;
            display: none; /* Hidden by default */
            color: #ccc;
        }

        /* Settings Panel */
        .settings-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            color: white;
            transition: transform 0.5s ease-out;
            z-index: 10;
            /* C√†i ƒë·∫∑t m·ªõi cho img logo */
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px; /* K√≠ch th∆∞·ªõc logo */
            height: 40px;
        }

        .settings-toggle img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* ƒê·∫£m b·∫£o logo kh√¥ng b·ªã m√©o */
        }

        .settings-toggle.rotate {
            animation: rotate 0.5s ease-out forwards;
        }
        .settings-toggle.rotate-back {
            animation: rotate-back 0.5s ease-out forwards;
        }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(180deg); } }
        @keyframes rotate-back { from { transform: rotate(180deg); } to { transform: rotate(0deg); } }


        .settings-panel {
            display: none; /* Hidden by default */
            position: absolute;
            top: 65px; /* V·ªã tr√≠ d∆∞·ªõi n√∫t c√†i ƒë·∫∑t */
            right: 20px;
            background-color: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            flex-direction: column;
            gap: 10px;
            z-index: 9; /* D∆∞·ªõi n√∫t toggle */
            min-width: 150px;
        }

        .settings-panel label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 1em;
            color: #ccc;
        }

        .settings-panel input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2);
            accent-color: #00bfff; /* M√†u checkbox */
        }

        .settings-panel button {
            background: linear-gradient(270deg, #00bfff, #1e90ff); /* Blueish gradient */
            color: white;
            padding: 10px;
            font-size: 0.9em;
            width: 100%;
            box-sizing: border-box;
            box-shadow: none; /* Remove default shadow for panel buttons */
            min-width: unset; /* Remove min-width from general button */
        }
        .settings-panel button:hover {
            transform: none; /* No scale for panel buttons */
            background: linear-gradient(270deg, #1e90ff, #00bfff); /* Slightly darker */
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            animation: fadeInModal 0.3s ease-out;
        }

        .modal .close-btn {
            background-color: #f44336;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
            margin-top: 20px; /* Space from content */
        }
        .modal .close-btn:hover {
            background-color: #d32f2f;
        }

        #modalLichSu .modal-content {
            background-color: #222;
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
            width: 90%;
            max-width: 700px;
            max-height: 80vh; /* Gi·ªõi h·∫°n chi·ªÅu cao */
            overflow-y: auto; /* Cho ph√©p cu·ªôn */
            color: white;
            display: flex; /* D√πng flex ƒë·ªÉ d·ªÖ cƒÉn ch·ªânh n√∫t ƒë√≥ng */
            flex-direction: column;
            align-items: center; /* CƒÉn gi·ªØa n·ªôi dung v√† n√∫t ƒë√≥ng */
        }

        #lichSuNoiDung {
            width: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu r·ªông c·ªßa modal-content */
            text-align: left;
        }
        #lichSuNoiDung .history-item {
            background-color: #333;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            word-break: break-word; /* ƒê√£ ƒë·ªïi t·ª´ break-all sang break-word ƒë·ªÉ tr√¥ng t·ª± nhi√™n h∆°n */
            border-left: 5px solid #00bfff; /* M√†u xanh n∆∞·ªõc bi·ªÉn */
            position: relative;
            padding-right: 40px; /* ƒê·ªß ch·ªó cho n√∫t x√≥a */
        }

        #lichSuNoiDung .delete-item-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #lichSuNoiDung .delete-item-btn:hover {
            background-color: #d32f2f;
        }

        /* Confirmation Modal */
        #confirmModal {
            text-align: center;
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.7);
            max-width: 350px;
            flex-direction: column;
            gap: 20px;
        }
        #confirmModal p {
            font-size: 1.1em;
            margin: 0;
            color: white;
        }
        #confirmModal .confirm-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        #confirmModal .confirm-buttons button {
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            min-width: 100px;
        }
        #confirmModal .confirm-buttons button.cancel-btn {
            background: #6c757d; /* Gray */
            color: white;
        }
        #confirmModal .confirm-buttons button.cancel-btn:hover {
            background: #5a6268;
        }
        #confirmModal .confirm-buttons button.continue-btn {
            background: #dc3545; /* Red */
            color: white;
        }
        #confirmModal .confirm-buttons button.continue-btn:hover {
            background: #c82333;
        }

        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ======================================= */
        /* CSS CHO SPLASH SCREEN M·ªöI - ƒê√ÇY L√Ä PH·∫¶N QUAN TR·ªåNG NH·∫§T */
        /* ======================================= */

        #splashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden; /* Quan tr·ªçng ƒë·ªÉ c√°c ph·∫ßn t√°ch kh√¥ng t·∫°o thanh cu·ªôn */
            display: flex; /* ƒê·ªÉ cƒÉn gi·ªØa t√™n */
            justify-content: center;
            align-items: center;
            z-index: 10000; /* Lu√¥n n·∫±m tr√™n c√πng */
            /* N·ªÅn gradient cho m√†n h√¨nh ch√≠nh c·ªßa splash screen, s·∫Ω hi·ªÉn th·ªã sau khi blackScreenOverlay m·ªù ƒëi */
            background: linear-gradient(270deg, #00bfff, #1e90ff, #ff69b4, #00fa9a, #00bfff);
            background-size: 1000% 1000%;
            animation: gradientFlow 15s ease infinite; /* Gi·ªØ animation n·ªÅn */
        }

        /* M√†n h√¨nh ƒëen ban ƒë·∫ßu */
        #blackScreenOverlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 10002; /* Tr√™n t√™n, d∆∞·ªõi c√°c ph·∫ßn t√°ch */
            opacity: 1;
            animation: blackScreenFadeOut 2s linear forwards; /* M·ªù d·∫ßn trong 2s */
            animation-delay: 0s; /* B·∫Øt ƒë·∫ßu ngay l·∫≠p t·ª©c */
        }

        /* T√™n c·ªßa b·∫°n */
        #myNameContainer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* CƒÉn gi·ªØa */
            z-index: 10001; /* D∆∞·ªõi m√†n h√¨nh ƒëen v√† c√°c ph·∫ßn t√°ch */
            opacity: 0; /* Ban ƒë·∫ßu ·∫©n */
            color: white;
            font-family: 'Arial Black', sans-serif; /* Font n·ªïi b·∫≠t h∆°n */
            font-size: 4.5em; /* K√≠ch th∆∞·ªõc to h∆°n */
            font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            /* Animation: hi·ªán ra (2-4s) v√† m·ªù ƒëi (4-6s) */
            animation: 
                myNameFadeInScale 2s ease-out 2s forwards, 
                myNameFadeOutScale 2s ease-in 4s forwards;
            white-space: nowrap; /* Gi·ªØ t√™n tr√™n m·ªôt d√≤ng n·∫øu c√≥ th·ªÉ */
            padding: 0 10px; /* ƒê·∫£m b·∫£o t√™n kh√¥ng b·ªã tr√†n ra ngo√†i m√†n h√¨nh qu√° s√°t l·ªÅ */
            box-sizing: border-box;
        }
        #myNameContainer .my-name {
            display: inline-block; /* ƒê·ªÉ √°p d·ª•ng transform v√† animation t·ªët h∆°n */
            text-align: center; /* ƒê·∫£m b·∫£o cƒÉn gi·ªØa cho t√™n nhi·ªÅu d√≤ng (n·∫øu c√≥) */
        }


        /* C√°c ph·∫ßn chia */
        .split-part {
            position: absolute;
            width: 50vw; /* Chi·∫øm 50% viewport width */
            height: 50vh; /* Chi·∫øm 50% viewport height */
            opacity: 0; /* Ban ƒë·∫ßu ·∫©n */
            /* K·∫ø th·ª´a n·ªÅn gradient t·ª´ #splashScreen */
            background: linear-gradient(270deg, #00bfff, #1e90ff, #ff69b4, #00fa9a, #00bfff);
            background-size: 1000% 1000%; /* Gi·ªØ animation n·ªÅn */
            /* Animation cho m·ªói ph·∫ßn: xu·∫•t hi·ªán, di chuy·ªÉn, v√† m·ªù d·∫ßn */
            animation: 
                splitAppear 0s linear 6s forwards, /* Xu·∫•t hi·ªán t·∫°i gi√¢y 6 */
                finalFadeOut 3s linear 7s forwards; /* M·ªù d·∫ßn t·ª´ gi√¢y 7-10 */
            z-index: 10003; /* N·∫±m tr√™n c√πng */
        }

        /* V·ªã tr√≠ ban ƒë·∫ßu v√† animation di chuy·ªÉn ri√™ng c·ªßa t·ª´ng ph·∫ßn */
        .split-part.top-left { 
            top: 0; left: 0; 
            animation: 
                splitAppear 0s linear 6s forwards, /* Xu·∫•t hi·ªán t·∫°i gi√¢y 6 */
                splitMoveTopLeft 1s ease-out 6s forwards, /* Di chuy·ªÉn ra t·ª´ gi√¢y 6-7 */
                finalFadeOut 3s linear 7s forwards; /* M·ªù d·∫ßn t·ª´ gi√¢y 7-10 */
        }
        .split-part.top-right { 
            top: 0; left: 50vw; 
            animation: 
                splitAppear 0s linear 6s forwards,
                splitMoveTopRight 1s ease-out 6s forwards, 
                finalFadeOut 3s linear 7s forwards;
        }
        .split-part.bottom-left { 
            top: 50vh; left: 0; 
            animation: 
                splitAppear 0s linear 6s forwards,
                splitMoveBottomLeft 1s ease-out 6s forwards, 
                finalFadeOut 3s linear 7s forwards;
        }
        .split-part.bottom-right { 
            top: 50vh; left: 50vw; 
            animation: 
                splitAppear 0s linear 6s forwards,
                splitMoveBottomRight 1s ease-out 6s forwards, 
                finalFadeOut 3s linear 7s forwards;
        }

        /* ================== */
        /* ƒê·ªäNH NGHƒ®A KEYFRAMES */
        /* ================== */

        /* N·ªÅn gradient */
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* M√†n h√¨nh ƒëen m·ªù d·∫ßn (0-2s) */
        @keyframes blackScreenFadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        /* T√™n hi·ªán ra v√† ph√≥ng to (2-4s) */
        @keyframes myNameFadeInScale {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* T√™n m·ªù d·∫ßn v√† thu nh·ªè (4-6s) */
        @keyframes myNameFadeOutScale {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); visibility: hidden; }
        }

        /* C√°c ph·∫ßn chia xu·∫•t hi·ªán (t·∫°i gi√¢y 6) */
        @keyframes splitAppear {
            to { opacity: 1; }
        }

        /* C√°c ph·∫ßn chia di chuy·ªÉn ra (6-7s) */
        @keyframes splitMoveTopLeft {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, -100%); } /* Di chuy·ªÉn l√™n tr√°i */
        }
        @keyframes splitMoveTopRight {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100%, -100%); } /* Di chuy·ªÉn l√™n ph·∫£i */
        }
        @keyframes splitMoveBottomLeft {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 100%); } /* Di chuy·ªÉn xu·ªëng tr√°i */
        }
        @keyframes splitMoveBottomRight {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100%, 100%); } /* Di chuy·ªÉn xu·ªëng ph·∫£i */
        }

        /* M·ªù d·∫ßn cu·ªëi c√πng c·ªßa c√°c ph·∫ßn t√°ch (7-10s) */
        @keyframes finalFadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            button {
                padding: 10px 15px; /* Gi·∫£m padding ngang cho n√∫t */
                font-size: 0.95em; /* Gi·∫£m font size cho n√∫t */
                min-width: 150px; /* ƒêi·ªÅu ch·ªânh min-width ƒë·ªÉ tr√°nh tr√†n */
            }
            .overlay {
                padding: 25px 15px; /* Gi·∫£m padding ngang c·ªßa overlay */
            }
            #myNameContainer {
                font-size: 3em; /* Nh·ªè h∆°n tr√™n di ƒë·ªông */
                word-wrap: break-word; /* Cho ph√©p ng·∫Øt t·ª´ n·∫øu t√™n qu√° d√†i */
                white-space: normal; /* Cho ph√©p xu·ªëng d√≤ng */
                max-width: 90vw; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông ƒë·ªÉ kh√¥ng tr√†n ra ngo√†i */
            }
            .settings-panel {
                right: 15px; /* ƒêi·ªÅu ch·ªânh v·ªã tr√≠ panel */
                min-width: 130px;
            }
            .settings-panel button {
                font-size: 0.85em;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5em;
            }
            textarea {
                height: 80px;
            }
            button {
                padding: 8px 12px; /* Gi·∫£m padding nh·ªè h∆°n n·ªØa */
                font-size: 0.85em; /* Gi·∫£m font size nh·ªè h∆°n n·ªØa */
                min-width: 130px; /* ƒêi·ªÅu ch·ªânh min-width ch·∫∑t ch·∫Ω h∆°n */
            }
            .overlay {
                padding: 15px 10px; /* Gi·∫£m padding r·∫•t nhi·ªÅu */
            }
            #myNameContainer {
                font-size: 1.8em; /* Nh·ªè h∆°n n·ªØa tr√™n di ƒë·ªông */
            }
            .button-group {
                gap: 8px; /* Gi·∫£m kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            }
        }
    </style>
</head>
<body>
    <div id="splashScreen">
        <div id="blackScreenOverlay"></div>
        <div id="myNameContainer">
            <span class="my-name">NGUY·ªÑN ƒê·∫ÆC HO√ÄNG VI·ªÜT</span> </div>
        <div class="split-part top-left"></div>
        <div class="split-part top-right"></div>
        <div class="split-part bottom-left"></div>
        <div class="split-part bottom-right"></div>
    </div>

    <div id="mainContent">
        <div class="overlay">
            <h1>üîç Gi·∫£i m√£ Doraemon</h1>
            <textarea id="input" placeholder="Nh·∫≠p m√£ troll ·ªü ƒë√¢y..." onkeydown="chanEnter(event)"></textarea>
            <div class="button-group">
                <button onclick="giaiMa()">üß† Gi·∫£i m√£ Doraemon</button>
                <button onclick="saoChep()">üìã Copy k·∫øt qu·∫£</button>
                <button onclick="startDictation()">üé§ Nh·∫≠n di·ªán gi·ªçng n√≥i</button>
            </div>
            <div id="output"></div>
            <div id="messageBox"></div>

            <div class="mic-indicator" id="micIndicator">
                <svg viewBox="0 0 24 24">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3zm5 8v3a5 5 0 0 1-10 0V9H5v3a7 7 0 0 0 6 6.92V22h2v-3.08A7 7 0 0 0 19 12V9z" />
                </svg>
            </div>
            <div id="micText">üéôÔ∏è ƒêang l·∫Øng nghe...</div>
            
<div class="settings-toggle" onclick="toggleSettings()">
    ‚öôÔ∏è
</div>
            <div class="settings-panel" id="settingsPanel">
                <label><input type="checkbox" id="toggleSound" onchange="toggleAudio()"> T·∫Øt √¢m thanh</label>
                <button onclick="openLichSu()">üìú Xem l·ªãch s·ª≠</button>
                <button onclick="showConfirmDeleteAll()">üóëÔ∏è X√≥a l·ªãch s·ª≠</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="modalLichSu">
        <div class="modal-content"> <button class="close-btn" onclick="closeLichSu()">ƒê√≥ng</button>
            <div id="lichSuNoiDung"></div>
        </div>
    </div>

    <div class="modal" id="confirmModal">
        <p id="confirmMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ kh√¥ng?</p>
        <div class="confirm-buttons">
            <button class="cancel-btn" onclick="cancelConfirmation()">Quay l·∫°i</button>
            <button class="continue-btn" onclick="proceedConfirmation()">Ti·∫øp t·ª•c</button>
        </div>
    </div>

    <audio id="myAudio" loop muted>
        <source src="https://media.vocaroo.com/mp3/1mrXpaxv1jUB" type="audio/mpeg">
    </audio>
    <audio id="typeSound" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2023/03/01/audio_2a802b1f48.mp3" type="audio/mpeg">
    </audio>

    <script>
        const tuDienDoraemon = {
            "c√°i loa bi·∫øt ƒëi": "Jaian",
            "th√°nh ch·∫£nh": "Suneo",
            "c·ª•c n·ª£ qu·ªëc d√¢n": "Nobita",
            "tr√πm ch√©m gi√≥": "Suneo",
            "boss ƒÉn v·∫∑t": "Doraemon",
            "si√™u nh√¢n g·ª•c ng√£": "Nobita",
            "m√°y ph√°t k·∫πo": "Doraemon",
            "·ªï bom di ƒë·ªông": "Jaian",
            "th√°nh ph√° ƒë·ªì": "Nobita",
            "chuy√™n gia g√¢y h·ªça": "Nobita",
            "nh√† t√†i tr·ª£ n∆∞·ªõc m·∫Øt": "m·∫π Nobita",
            "l√≤ luy·ªán ƒëi·ªÉm 0": "l·ªõp h·ªçc c·ªßa Nobita",
            "tr√πm th·∫•t t√¨nh": "Nobita",
            "ƒë·ª©a tr·∫ª cu·ªëi c√πng c·ªßa mushika": "Micca",
            "m√°y ATM bi·∫øt ƒëi": "Doraemon",
            "tr√≠ tu·ªá nh√¢n t·∫°o c√≥ t√¢m": "Doraemon",
            "con tinh tinh": "Jaian",
            "con kh·ªâ ƒë·ªôt": "Jaian", "kh·ªâ ƒë·ªôt": "Jaian",
            "tinh tinh": "Jaian",
            "con c√°o": "Suneo", "c√°o": "Suneo",
            "b·∫°ch tu·ªôc": "Noise",
            "qu·∫ßn d√†i": "2 con c√° tr·∫Øm ƒëen ƒëc l√†m ·ªü Ph√°p r·∫•t l√† m·∫Øc ti·ªÅn (c·ªßa Suneo)",
            "m·ª• ph√π th·ªßy": "m·∫π c·ªßa Nobita",
            "t√™n ng·ªëc h·∫≠u ƒë·∫≠u": "Nobita",
            "t√™n robinson phi·ªÅn ph·ª©c": "Nobita",
            "thi√™n t√†i ng·ªß": "Nobita",
            "di·ªÖn vi√™n su·∫•t s·∫Øc": "Nobita",
            "b·∫≠c th·∫ßy nƒÉn n·ªâ": "Nobita",
            "thi√™n t√†i th·∫Øt d√¢y": "Nobita",
            "tay vua s√∫ng": "Nobita",
            "xe bu√Ωt": "Nobita", "xe bus":
            "Nobita", "m√®o m√°y": "Doraemon",
            "m·ªè nh·ªçn": "Suneo",
            "l·ªìi r·ªën": "Jaian",
            "y√™n ·∫Øng": "nh√† Shizuka",
            "h√¨nh tr√≤n": "b√°nh r√°n dorayaki",
            "k·∫ª tham lam": "Jaian",
            "hai ng∆∞·ªùi n·ªïi ti·∫øng ham ƒÉn": "Jaian v√† Suneo",
            "ƒëi·ªÉm ƒëen": "ƒëi·ªÉm 0",
            "b√†n tay v√†ng trong l√†ng ng√°o ng∆°": "Nobita",
            "c·ª•c t·∫° qu·ªëc d√¢n": "Nobita",
            "ƒë·∫°i ca s√¢n tr∆∞·ªùng": "Jaian",
            "ng∆∞·ªùi m·∫´u s·ª´ng s·ªè": "Suneo",
            "c√¥ g√°i t·∫Øm m·ªói t·∫≠p": "Shizuka",
            "vua b√°nh r√°n": "Doraemon",
            "th√°nh c·∫ßu c·ª©u": "Nobita",
            "ng∆∞·ªùi ƒë·∫øn t·ª´ t∆∞∆°ng lai": "Doraemon",
            "c√¢y ATM s·ªëng": "Doraemon",
            "l·ªìng ti·∫øng ƒë·ªông ƒë·∫•t": "Jaian",
            "di·ªÖn vi√™n ch√≠nh c·ªßa bi k·ªãch": "Nobita",
            "fan cu·ªìng c√¥ng ngh·ªá": "Suneo",
            "k·∫ª l∆∞·ªùi bi·∫øng nh·ªè b√©": "Nobita",
            "ch·ªìn xanh nh·ªè ƒë√°ng y√™u": "Doraemon",
            "b√¨nh y√™n tr∆∞·ªõc c∆°n b√£o": "nh√† Shizuka",
            "c·∫≠u b√© s√°o l·∫°c ƒëi·ªáu": "Nobita",
            "loa ph√≥ng thanh bi·∫øt ƒëi": "Jaian",
            "tr√πm ph√° n·ªët": "Nobita",
            "ng∆∞·ªùi c·ª©u √¢m nh·∫°c ƒë·ªãa c·∫ßu": "Doraemon",
            "qu√°i v·∫≠t h√∫t √¢m": "b√†o t·ª≠ noise",
            "ng∆∞·ªùi b·∫°n ƒë·∫øn t·ª´ h√†nh tinh √¢m nh·∫°c": "Micca",
            "th√°nh ph√° b·∫£n nh·∫°c": "Nobita",
            "c√¢y s√°o truy·ªÅn thuy·∫øt": "c√¢y s√°o d·ªçc c·ªßa mushika",
            "b·∫£n nh·∫°c gi·∫£i c·ª©u tr√°i ƒë·∫•t": "b·∫£n giao h∆∞·ªüng ƒë·ªãa c·∫ßu",
            "phi c√¥ng nghi·ªáp d∆∞": "Nobita",
            "v√πng ƒë·∫•t trong m∆°": "Utopia",
            "c∆∞ d√¢n ƒë√°m m√¢y": "ng∆∞·ªùi s·ªëng ·ªü Utopia",
            "nh√† tr√™n tr·ªùi view ƒë·∫πp": "Utopia",
            "ng∆∞·ªùi b·∫°n Utopia": "Sonya",
            "tr√πm ƒëi·ªÅu khi·ªÉn th·ªùi ti·∫øt": "qu·∫£n l√Ω Utopia",
            "m·∫∑t trƒÉng bay l·∫°c": "Utopia",
            "chuy·∫øn phi√™u l∆∞u tr√™n tr·ªùi": "h√†nh tr√¨nh c·ªßa nh√≥m Nobita",
            "l√¢u ƒë√†i m√¢y th·∫ßn b√≠": "trung t√¢m ƒëi·ªÅu h√†nh Utopia",
            "tr√πm ch·∫•n ƒë·ªông b·∫ßu tr·ªùi": "Suneo l√°i m√°y bay",
            "c·∫≠u b√© bay kh√¥ng b·∫±ng l√°i": "Nobita",
            "th√°nh nh·∫£y moonwalk ngo√†i v≈© tr·ª•": "Nobita",
            "chuy√™n gia t√© kh√¥ng tr·ªçng l·ª±c": "Nobita",
            "tr·∫°m v≈© tr·ª• di ƒë·ªông": "t√†u c·ªßa Doraemon",
            "ng∆∞·ªùi b·∫°n tai d√†i tr√™n m·∫∑t trƒÉng": "Luca",
            "c∆∞ d√¢n m·∫∑t trƒÉng b√≠ ·∫©n": "t·ªôc ng∆∞·ªùi Espal",
            "ƒë·ªôi th√°m hi·ªÉm m·∫∑t trƒÉng": "nh√≥m Nobita",
            "m·∫∑t trƒÉng gi·∫£ t∆∞·ªüng": "th·∫ø gi·ªõi do b·∫£o b·ªëi t·∫°o ra",
            "cu·ªôc chi·∫øn kh√¥ng tr·ªçng l·ª±c": "tr·∫≠n ƒë·∫•u tr√™n m·∫∑t trƒÉng",
            "l≈© b·∫°n ngo√†i h√†nh tinh ƒë√°ng y√™u": "Luca v√† ƒë·ªìng b·ªçn",
            "b·∫ßu tr·ªùi ƒë√™m ƒë·∫ßy ·∫£o m·ªông": "khung c·∫£nh m·∫∑t trƒÉng",
            "c·∫≠u b√© l∆∞·ªùi bi·∫øng nh·∫•t th√†nh ph·ªë": "Nobita",
            "c·∫≠u b√© x·∫•u t√≠nh nh·∫•t th√†nh ph·ªë": "Jaian",
            "nh·∫°c sƒ© v≈© tr·ª•": "Trupet",
            "nh√† so·∫°n nh·∫°c vƒ© ƒë·∫°i": "Trupet",
            "ng∆∞·ªùi s√°ng t√°c giao h∆∞·ªüng ƒë·ªãa c·∫ßu": "Trupet",
            "ch·ªß nh√¢n b·∫£n giao h∆∞·ªüng ƒë·ªãa c·∫ßu": "Trupet",
            "nh√† s√°ng t·∫°o √¢m nh·∫°c v≈© tr·ª•": "Trupet",
            "nh·∫°c sƒ© b·∫£o v·ªá h√≤a b√¨nh √¢m nh·∫°c": "Trupet",
            "r√πa si√™u t·ªëc v≈© tr·ª•": "Moto",
            "r√πa v≈© tr·ª• c√≥ mai th√©p": "Moto",
            "r√πa si√™u b·ªÅn": "Moto",
            "t·ªëc ƒë·ªô v≈© tr·ª• t·ª´ mai r√πa": "Moto",
            "v≈© tr·ª• ƒëua r√πa": "Moto",
            "con r√πa nhanh nh·∫•t trong kh√¥ng gian": "Moto",
            "vi√™n ƒë·∫°n c·ªßa ƒë·∫°i b√°c kh√¥ng kh√≠": "Moto"
        };

        let lastDecodedResult = "";
        let audioPlayedFirstTime = false;
        let pendingDeleteIndex = -1; // Bi·∫øn ƒë·ªÉ l∆∞u tr·ªØ ch·ªâ s·ªë c·ªßa m·ª•c s·∫Ω x√≥a
        let isDeletingAll = false; // Bi·∫øn c·ªù ƒë·ªÉ bi·∫øt ƒëang x√≥a to√†n b·ªô hay x√≥a t·ª´ng m·ª•c

        function showMessage(msg, type = 'info') {
            const msgBox = document.getElementById('messageBox');
            msgBox.textContent = msg;
            msgBox.className = 'show';
            if (type === 'error') {
                msgBox.style.backgroundColor = 'rgba(220, 20, 60, 0.8)';
            } else if (type === 'success') {
                msgBox.style.backgroundColor = 'rgba(60, 179, 113, 0.8)';
            } else {
                msgBox.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
            }

            if (msgBox.timer) clearTimeout(msgBox.timer);
            msgBox.timer = setTimeout(() => {
                msgBox.className = '';
                msgBox.textContent = '';
            }, 3000);
        }

        function escapeRegExp(str) {
            return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        }

        function giaiMa() {
            const inputElement = document.getElementById("input");
            const outputElement = document.getElementById("output");
            const input = inputElement.value.trim().toLowerCase();

            if (!input) {
                showMessage("‚ö†Ô∏è B·∫°n ch∆∞a nh·∫≠p g√¨ c·∫£!", "error");
                lastDecodedResult = "";
                return;
            }

            let text = input;
            const original = text;
            // Clear current output and start typing animation
            goChuTungKyTu("‚û°Ô∏è ƒêang x·ª≠ l√Ω...", "output", 30);

            // Give a short delay to allow "ƒêang x·ª≠ l√Ω..." to appear before actual processing
            setTimeout(() => {
                const entries = Object.entries(tuDienDoraemon).sort((a, b) => b[0].length - a[0].length);
                for (const [k, v] of entries) {
                    const re = new RegExp(escapeRegExp(k), "gi");
                    text = text.replace(re, v);
                }

                if (text === original) {
                    goChuTungKyTu("‚ùì Kh√¥ng t√¨m th·∫•y t·ª´ kh√≥a ph√π h·ª£p.", "output", 30);
                    lastDecodedResult = "";
                } else {
                    goChuTungKyTu("‚û°Ô∏è K·∫øt qu·∫£: " + text, "output", 30);
                    lastDecodedResult = text;
                    const lichSu = JSON.parse(localStorage.getItem("lichSuDoraemon") || "[]");
                    // Add timestamp to history item
                    lichSu.unshift({
                        input: original,
                        output: text,
                        timestamp: new Date().toLocaleString('vi-VN')
                    });
                    localStorage.setItem("lichSuDoraemon", JSON.stringify(lichSu.slice(0, 20))); // Limit to 20 items
                }
            }, 500); // Small delay to let the processing message show
        }

        function goChuTungKyTu(text, elementId, speed) {
            const el = document.getElementById(elementId);
            const sound = document.getElementById("typeSound");

            // Stop any ongoing typing animation and clear content
            if (el.typingTimer) clearTimeout(el.typingTimer);
            el.textContent = "";

            let index = 0;

            function type() {
                if (index < text.length) {
                    el.textContent += text.charAt(index);
                    // Only play sound if not muted
                    if (!sound.muted) {
                        try {
                            sound.pause();
                            sound.currentTime = 0;
                            sound.play();
                        } catch (e) {
                            console.error("L·ªói khi ph√°t √¢m thanh:", e);
                        }
                    }
                    el.typingTimer = setTimeout(type, speed);
                    index++;
                } else {
                    // Ensure sound is stopped after typing is complete
                    sound.pause();
                    sound.currentTime = 0;
                }
            }
            type();
        }

        function saoChep() {
            if (!lastDecodedResult) {
                showMessage("‚ö†Ô∏è Ch∆∞a c√≥ k·∫øt qu·∫£ gi·∫£i m√£ ƒë·ªÉ sao ch√©p!", "error");
                return;
            }
            navigator.clipboard.writeText(lastDecodedResult).then(() => {
                showMessage("üìã ƒê√£ sao ch√©p k·∫øt qu·∫£!", "success");
            }).catch(err => {
                console.error('Kh√¥ng th·ªÉ sao ch√©p vƒÉn b·∫£n: ', err);
                showMessage('C√≥ l·ªói x·∫£y ra khi sao ch√©p. Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c sao ch√©p th·ªß c√¥ng.', "error");
            });
        }

        let recognition;
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'vi-VN';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            function startDictation() {
                showMessage("üéôÔ∏è ƒêang l·∫Øng nghe...", "info");
                document.getElementById("micIndicator").style.display = "block";
                document.getElementById("micText").style.display = "block";
                recognition.start();
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById("input").value = transcript;
                    document.getElementById("micIndicator").style.display = "none";
                    document.getElementById("micText").style.display = "none";
                    showMessage("‚úÖ Nh·∫≠n di·ªán gi·ªçng n√≥i ho√†n t·∫•t.", "success");
                    giaiMa();
                };
                recognition.onerror = function(event) {
                    console.error("L·ªói nh·∫≠n di·ªán gi·ªçng n√≥i:", event.error);
                    showMessage("‚ö†Ô∏è Kh√¥ng nh·∫≠n di·ªán ƒë∆∞·ª£c, th·ª≠ l·∫°i. L·ªói: " + event.error, "error");
                    document.getElementById("micIndicator").style.display = "none";
                    document.getElementById("micText").style.display = "none";
                };
                recognition.onend = function() {
                    document.getElementById("micIndicator").style.display = "none";
                    document.getElementById("micText").style.display = "none";
                };
            }
        } else {
            function startDictation() {
                showMessage("‚ö†Ô∏è Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ nh·∫≠n di·ªán gi·ªçng n√≥i (Ch·ªâ ho·∫°t ƒë·ªông t·ªët tr√™n Chrome).", "error");
            }
        }

        function chanEnter(e) {
            if (e.key === "Enter") {
                e.preventDefault();
                giaiMa();
            }
        }

        function toggleSettings() {
            const panel = document.getElementById("settingsPanel");
            const toggleButton = document.querySelector(".settings-toggle");

            if (panel.style.display === "flex") {
                panel.style.display = "none";
                toggleButton.classList.remove("rotate");
                toggleButton.classList.add("rotate-back");
            } else {
                panel.style.display = "flex";
                toggleButton.classList.remove("rotate-back");
                toggleButton.classList.add("rotate");
            }
        }

        function toggleAudio() {
            const muted = document.getElementById("toggleSound").checked;
            document.getElementById("myAudio").muted = muted;
            document.getElementById("typeSound").muted = muted;
            localStorage.setItem("doraemonSoundMuted", muted);
        }

        function openLichSu() {
            const lichSu = JSON.parse(localStorage.getItem("lichSuDoraemon") || "[]");
            const box = document.getElementById("lichSuNoiDung");
            
            box.innerHTML = ''; // Clear previous content

            if (lichSu.length === 0) {
                box.innerHTML = '<p style="text-align: center; color: #ccc;"><i>Ch∆∞a c√≥ l·ªãch s·ª≠.</i></p>';
            } else {
                lichSu.forEach((item, idx) => {
                    const div = document.createElement('div');
                    div.classList.add('history-item');
                    div.innerHTML = `<strong>(${item.timestamp})</strong><br>${item.input} ‚û°Ô∏è ${item.output}`;
                    
                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = '‚ùå';
                    deleteButton.classList.add('delete-item-btn');
                    deleteButton.onclick = (event) => {
                        event.stopPropagation(); // Prevent modal from closing if button is within it
                        showConfirmDeleteOne(idx);
                    };
                    div.appendChild(deleteButton);
                    box.appendChild(div);
                });
            }
            document.getElementById("modalLichSu").style.display = "flex";
        }

        function closeLichSu() {
            document.getElementById("modalLichSu").style.display = "none";
        }

        function showConfirmDeleteOne(index) {
            pendingDeleteIndex = index;
            isDeletingAll = false;
            document.getElementById("confirmMessage").textContent = "B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a m·ª•c n√†y kh·ªèi l·ªãch s·ª≠?";
            document.getElementById("confirmModal").style.display = "flex";
        }

        function showConfirmDeleteAll() {
            isDeletingAll = true;
            document.getElementById("confirmMessage").textContent = "B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ kh√¥ng?";
            document.getElementById("confirmModal").style.display = "flex";
        }

        function proceedConfirmation() {
            if (isDeletingAll) {
                localStorage.removeItem("lichSuDoraemon");
                showMessage("üóëÔ∏è ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠!", "success");
                closeLichSu(); // Close history modal after deleting all
            } else if (pendingDeleteIndex !== -1) {
                const lichSu = JSON.parse(localStorage.getItem("lichSuDoraemon") || "[]");
                lichSu.splice(pendingDeleteIndex, 1);
                localStorage.setItem("lichSuDoraemon", JSON.stringify(lichSu));
                showMessage("üóëÔ∏è ƒê√£ x√≥a m·ª•c kh·ªèi l·ªãch s·ª≠!", "success");
                pendingDeleteIndex = -1;
            }
            document.getElementById("confirmModal").style.display = "none";
            openLichSu(); // Refresh history display after any deletion
        }

        function cancelConfirmation() {
            pendingDeleteIndex = -1;
            isDeletingAll = false;
            document.getElementById("confirmModal").style.display = "none";
        }

        document.addEventListener("DOMContentLoaded", () => {
            const splashScreen = document.getElementById("splashScreen");
            const mainContent = document.getElementById("mainContent");
            const myAudio = document.getElementById("myAudio");
            const toggleSoundCheckbox = document.getElementById("toggleSound");

            // Kh·ªüi t·∫°o tr·∫°ng th√°i √¢m thanh ban ƒë·∫ßu t·ª´ localStorage
            document.getElementById("typeSound").volume = 0.2; // ƒê·∫∑t √¢m l∆∞·ª£ng cho √¢m thanh g√µ
            const savedMuteState = localStorage.getItem("doraemonSoundMuted");
            if (savedMuteState === "true") {
                toggleSoundCheckbox.checked = true;
                myAudio.muted = true;
                document.getElementById("typeSound").muted = true;
            } else {
                toggleSoundCheckbox.checked = false;
                myAudio.muted = false;
                document.getElementById("typeSound").muted = false;
            }

            // T·ªïng th·ªùi gian c·ªßa t·∫•t c·∫£ c√°c animation l√† 10 gi√¢y (10000 ms)
            const totalAnimationDuration = 10000; 

            // Sau khi t·∫•t c·∫£ c√°c animation ho√†n t·∫•t (10 gi√¢y), ·∫©n splash screen v√† hi·ªán main content
            setTimeout(() => {
                splashScreen.style.display = "none"; // ·∫®n ho√†n to√†n splash screen
                mainContent.style.display = "flex"; // Hi·ªÉn th·ªã n·ªôi dung ch√≠nh
                mainContent.classList.add("visible"); // K√≠ch ho·∫°t hi·ªáu ·ª©ng m·ªù d·∫ßn cho main content

                // Logic ph√°t nh·∫°c n·ªÅn: Do ch√≠nh s√°ch c·ªßa tr√¨nh duy·ªát, nh·∫°c s·∫Ω ch·ªâ ph√°t khi c√≥ t∆∞∆°ng t√°c ng∆∞·ªùi d√πng.
                // S·ª± ki·ªán 'click' tr√™n 'document' ·ªü d∆∞·ªõi ƒë√£ x·ª≠ l√Ω vi·ªác n√†y.
                // D√≤ng d∆∞·ªõi ƒë√¢y ch·ªâ l√† ƒë·ªÉ ƒë√°nh d·∫•u ƒë√£ c·ªë g·∫Øng ph√°t n·∫øu ch∆∞a ph√°t l·∫ßn n√†o
                if (!audioPlayedFirstTime && !myAudio.muted) {
                     myAudio.play().catch(error => {
                         console.log("L·ªói khi ph√°t nh·∫°c n·ªÅn t·ª± ƒë·ªông (c·∫ßn t∆∞∆°ng t√°c ng∆∞·ªùi d√πng):", error);
                         // C√≥ th·ªÉ hi·ªÉn th·ªã m·ªôt th√¥ng b√°o nh·ªè cho ng∆∞·ªùi d√πng click ƒë·ªÉ b·∫≠t nh·∫°c
                     });
                }
                audioPlayedFirstTime = true; // ƒê√°nh d·∫•u ƒë√£ c·ªë g·∫Øng ph√°t nh·∫°c n·ªÅn
            }, totalAnimationDuration);

            // G·∫Øn l·∫°i s·ª± ki·ªán l·∫Øng nghe click to√†n b·ªô document, ƒë·∫£m b·∫£o n√≥ lu√¥n ho·∫°t ƒë·ªông
            // K·ªÉ c·∫£ khi splash screen bi·∫øn m·∫•t, click v√†o giao di·ªán ch√≠nh s·∫Ω k√≠ch ho·∫°t nh·∫°c n·ªÅn
            document.addEventListener("click", function(e) {
                const panel = document.getElementById("settingsPanel");
                const toggle = document.querySelector(".settings-toggle");
                const modal = document.getElementById("modalLichSu");
                const confirmModal = document.getElementById("confirmModal");

                // Logic ƒë√≥ng settings panel khi click ra ngo√†i
                if (panel.style.display === "flex" && !panel.contains(e.target) && !toggle.contains(e.target) && !modal.contains(e.target) && !confirmModal.contains(e.target)) {
                    panel.style.display = "none";
                    toggle.classList.remove("rotate");
                    toggle.classList.add("rotate-back");
                }
                // Logic cho nh·∫°c n·ªÅn (ƒë√£ c√≥ t·ª´ tr∆∞·ªõc v√† v·∫´n ho·∫°t ƒë·ªông)
                // N√≥ s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t khi ng∆∞·ªùi d√πng click l·∫ßn ƒë·∫ßu v√†o trang web
                // (bao g·ªìm c·∫£ click ƒë·∫ßu ti√™n l√™n giao di·ªán ch√≠nh sau splash screen).
            }, { once: false });
        });

        // Event listener for toggleSound checkbox (moved to DOMContentLoaded)
        document.getElementById("toggleSound").addEventListener("change", toggleAudio);
    </script>
</body>
</html>
